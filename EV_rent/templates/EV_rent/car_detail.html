{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% load sass_tags %}

{% block title %} {% trans 'Car Info' %} {% endblock %}

{% block style_css %}
    <link rel="stylesheet" href="{% static 'EV_rent/css/car_detail_css.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
{% endblock %}

{% block cnt %}
    <input type="hidden" id="price" name="price" value="{{ car.rent_price }}">
    <h2 class="car-title title-side-line">{{ car.car_brand }} {{ car.model }}</h2>

    {#    CAROUSEL    #}
    <div id="myCarousel" class="carousel slide" data-bs-ride="carousel">

        <div class="carousel-indicators">
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true"
                    aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>

        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static "EV_rent/img" %}/{{ car.url_page }}/{{ car.url_page }}-1.png" class="d-block w-100"
                     alt="tesla-model-s-2017-exterior-01">
            </div>
            <div class="carousel-item">
                <img src="{% static "EV_rent/img" %}/{{ car.url_page }}/{{ car.url_page }}-2.png" class="d-block w-100"
                     alt="tesla-model-s-2017-exterior-01">
            </div>
            <div class="carousel-item">
                <img src="{% static "EV_rent/img" %}/{{ car.url_page }}/{{ car.url_page }}-3.png" class="d-block w-100"
                     alt="tesla-model-s-2017-exterior-01">
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Предыдущий</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Следующий</span>
        </button>

    </div>
    {#    END-CAROUSEL    #}

    <div>
        <div class="car-desc title-side-line">{% trans "Description" %}</div>
        <div class="car-text">{{ car.description }}</div>
    </div>

    <div>
        <div class="car-desc title-side-line">{% trans "Specifications" %}</div>
        <div class="car-item">
            <div class="item-wrapper">
                <div class="wrapper-left">
                    <div class="items-left">
                        <div class="icon-data">
                            <svg xmlns="http://www.w3.org/2000/svg" width="60px" height="60px"
                                 fill="#4E4C97"
                                 class="bi bi-people-fill" viewBox="0 0 16 16">
                                <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7Zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216ZM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"></path>
                            </svg>

                            {{ car.num_sits }} {% trans 'Seats' %}
                        </div>
                        <div class="icon-data">
                            {#distance icon#}
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                 xmlns:svgjs="http://svgjs.com/svgjs"
                                 width="60px" height="60px" x="0" y="0" viewBox="0 0 682.667 682.667"
                                 style="enable-background:new 0 0 512 512" xml:space="preserve"
                                 class=""><g><defs><clipPath id="a" clipPathUnits="userSpaceOnUse"><path d="M0 512h512V0H0Z" fill="#4e4c97" data-original="#000000"></path></clipPath></defs><g
                                    clip-path="url(#a)"
                                    transform="matrix(1.33333 0 0 -1.33333 0 682.667)"><path d="M0 0c0-53.672-77.131-125.688-77.131-125.688S-154.263-53.672-154.263 0c0 42.598 34.533 77.131 77.132 77.131C-34.533 77.131 0 42.598 0 0Z" style="stroke-width:30;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1" transform="translate(169.15 172.93)" fill="none" stroke="#4e4c97" stroke-width="30" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="none" stroke-opacity="" data-original="#000000" class=""></path>
                                <path d="M0 0c0-8.177-6.629-14.806-14.806-14.806S-29.612-8.177-29.612 0s6.629 14.806 14.806 14.806S0 8.177 0 0Z"
                                      style="stroke-width:30;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
                                      transform="translate(106.825 172.93)" fill="none" stroke="#4e4c97"
                                      stroke-width="30" stroke-linecap="butt" stroke-linejoin="miter"
                                      stroke-miterlimit="10" stroke-dasharray="none" stroke-opacity=""
                                      data-original="#000000" class=""></path>
                                <path d="M0 0c0-53.672-77.131-125.688-77.131-125.688S-154.263-53.672-154.263 0c0 42.598 34.533 77.131 77.132 77.131C-34.533 77.131 0 42.598 0 0Z"
                                      style="stroke-width:30;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
                                      transform="translate(496.95 392.944)" fill="none" stroke="#4e4c97"
                                      stroke-width="30" stroke-linecap="butt" stroke-linejoin="miter"
                                      stroke-miterlimit="10" stroke-dasharray="none" stroke-opacity=""
                                      data-original="#000000" class=""></path>
                                <path d="M0 0c0-8.177-6.629-14.806-14.806-14.806S-29.612-8.177-29.612 0s6.629 14.806 14.806 14.806S0 8.177 0 0Z"
                                      style="stroke-width:30;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
                                      transform="translate(434.626 392.944)" fill="none"
                                      stroke="#4e4c97"
                                      stroke-width="30" stroke-linecap="butt" stroke-linejoin="miter"
                                      stroke-miterlimit="10" stroke-dasharray="none" stroke-opacity=""
                                      data-original="#000000" class=""></path>
                                <path d="M0 0h212.794c30.377 0 55.003 24.626 55.003 55.003v.001c0 30.377-24.626 55.003-55.003 55.003h-83.896c-30.377 0-55.003 24.626-55.003 55.003 0 30.378 24.626 55.004 55.003 55.004h78.896"
                                      style="stroke-width:30;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
                                      transform="translate(152.022 47.242)" fill="none" stroke="#4e4c97"
                                      stroke-width="30" stroke-linecap="butt" stroke-linejoin="miter"
                                      stroke-miterlimit="10" stroke-dasharray="none" stroke-opacity=""
                                      data-original="#000000" class=""></path></g></g>
                    </svg>

                            {{ car.range_km }} {% trans 'km' %}
                        </div>
                    </div>
                </div>
                <div class="wrapper-right">
                    <div class="items-right">
                        <div class="icon-data">
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                 xmlns:svgjs="http://svgjs.com/svgjs"
                                 width="60px" height="60px" x="0" y="0" viewBox="0 0 67 67"
                                 style="enable-background:new 0 0 512 512" xml:space="preserve"
                                 class="">
                        <g><path d="M45.833 27.083c-10.348 0-18.75 8.402-18.75 18.75 0 10.349 8.402 18.75 18.75 18.75 10.349 0 18.75-8.401 18.75-18.75 0-10.348-8.401-18.75-18.75-18.75zm-43.721 6.25v21.763a6.214 6.214 0 0 0 6.214 6.214H25a2.084 2.084 0 0 0 0-4.167H8.326a2.046 2.046 0 0 1-2.047-2.047V33.333a2.085 2.085 0 0 0-2.084-2.083 2.085 2.085 0 0 0-2.083 2.083zm43.721-2.083c8.049 0 14.584 6.535 14.584 14.583 0 8.049-6.535 14.584-14.584 14.584-8.048 0-14.583-6.535-14.583-14.584 0-8.048 6.535-14.583 14.583-14.583zm-2.083 6.224v8.359c0 .789.446 1.511 1.152 1.864l6.658 3.329a2.084 2.084 0 0 0 1.863-3.727l-5.506-2.753v-7.072c0-1.15-.934-2.084-2.084-2.084a2.085 2.085 0 0 0-2.083 2.084zM13.542 47.917h6.25a2.085 2.085 0 0 0 2.083-2.084 2.085 2.085 0 0 0-2.083-2.083h-6.25c-1.15 0-2.084.934-2.084 2.083 0 1.15.934 2.084 2.084 2.084zm0-6.25h6.25a2.085 2.085 0 0 0 2.083-2.084 2.085 2.085 0 0 0-2.083-2.083h-6.25c-1.15 0-2.084.934-2.084 2.083 0 1.15.934 2.084 2.084 2.084zm0-6.25h6.25a2.085 2.085 0 0 0 2.083-2.084 2.085 2.085 0 0 0-2.083-2.083h-6.25c-1.15 0-2.084.934-2.084 2.083 0 1.15.934 2.084 2.084 2.084zm17.737-25h-12.5V6.25a2.084 2.084 0 0 0-4.167 0v4.167H8.326a6.214 6.214 0 0 0-6.214 6.213V25a2.084 2.084 0 0 0 4.167 0v-2.083h54.166v4.231a2.084 2.084 0 0 0 4.167 0V16.63a6.213 6.213 0 0 0-6.213-6.213h-6.287V6.25a2.084 2.084 0 0 0-4.167 0v4.167h-12.5V6.25a2.084 2.084 0 0 0-4.166 0zm29.166 8.333v-2.12a2.045 2.045 0 0 0-2.046-2.047h-6.287v4.167zm-45.833-4.167H8.325c-1.13 0-2.046.917-2.046 2.047v2.12h8.333zm33.333 0H18.779v4.167h29.166z" fill="#4e4c97" data-original="#000000" class=""></path></g>
                    </svg>

                            {{ car.year }} {% trans 'year' %}
                        </div>
                        <div class="icon-data">
                            <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                 xmlns:svgjs="http://svgjs.com/svgjs" width="60px" height="60px" x="0"
                                 y="0" viewBox="0 0 480 480" style="enable-background:new 0 0 512 512"
                                 xml:space="preserve" class=""><g><path d="m477.656 226.344-16-16A8 8 0 0 0 456 208h-24a8 8 0 0 0-8 8v40h-16v-56a8 8 0 0 0-8-8h-51.72l-29.6-44.44A8 8 0 0 0 312 144h-48v-16h56a8 8 0 0 0 8-8V88a8 8 0 0 0-8-8H160a8 8 0 0 0-8 8v32a8 8 0 0 0 8 8h56v16h-48a8 8 0 0 0-6.656 3.56L131.72 192H88a8 8 0 0 0-8 8v48H64v-48a8 8 0 0 0-8-8H24a8 8 0 0 0-6.656 3.56l-16 24A8.052 8.052 0 0 0 0 224v24a8.052 8.052 0 0 0 1.344 4.44L16 274.4V344a8 8 0 0 0 8 8h32a8 8 0 0 0 8-8v-48h16v48a8 8 0 0 0 8 8h43.72l29.6 44.44A8 8 0 0 0 168 400h232a8 8 0 0 0 8-8v-72h16v56a8 8 0 0 0 8 8h24a8 8 0 0 0 5.656-2.344l16-16A8 8 0 0 0 480 360V232a8 8 0 0 0-2.344-5.656zM48 256v80H32v-64a8.052 8.052 0 0 0-1.344-4.44L16 245.6v-19.2L28.28 208H48v48zm32 24H64v-16h16v16zm88-168V96h144v16H168zm80 16v16h-16v-16h16zm112 256H172.28l-29.6-44.44A8 8 0 0 0 136 336H96V208h40a8 8 0 0 0 6.656-3.56L172.28 160h135.44l29.6 44.44A8 8 0 0 0 344 208h16v176zm32-120v120h-16V208h16v56zm32 40h-16v-32h16v32zm40 52.688L452.688 368H440V224h12.688L464 235.312v121.376z" fill="#4e4c97" data-original="#000000" class=""></path><path
                                    d="M309.897 258.593A8 8 0 0 0 304 256h-38.024l13.832-62.264a8 8 0 0 0-13.216-7.632l-96 88A8 8 0 0 0 176 288h38.024l-13.832 62.264a8 8 0 0 0 13.216 7.632l96-88a8 8 0 0 0 .489-11.303zm-88.577 70.343 10.488-47.2A7.999 7.999 0 0 0 224 272h-27.432l62.112-56.936-10.488 47.2A7.999 7.999 0 0 0 256 272h27.432l-62.112 56.936zM112 256h16v64h-16zM112 224h16v16h-16z"
                                    fill="#4e4c97" data-original="#000000" class=""></path></g>
                    </svg>

                            {{ car.horse_power }} {% trans "HP" %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="icon-data-last">
            <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink"
                 xmlns:svgjs="http://svgjs.com/svgjs" width="60px" height="60px" x="0" y="0" viewBox="0 0 512 512"
                 style="enable-background:new 0 0 512 512" xml:space="preserve" class=""><g><path d="M401.592 90.326h-40.163c-22.182 0-40.163-17.982-40.163-40.163h0c0-22.182 17.982-40.163 40.163-40.163h40.163v80.326zM401.592 30.082h40.163M401.592 70.245h40.163M256 150.571h0c0-27.727-22.477-50.204-50.204-50.204H105.388c-13.863 0-25.102-11.239-25.102-25.102h0c0-13.863 11.239-25.102 25.102-25.102h215.878M481.918 451.796H30.082c-11.091 0-20.082-8.991-20.082-20.082v-96.541c0-32.657 19.882-62.024 50.204-74.153h391.592C482.117 273.149 502 302.516 502 335.173v96.541c0 11.091-8.991 20.082-20.082 20.082z" style="stroke-width:20;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;" fill="none" stroke="#4e4c97" stroke-width="20" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" data-original="#000000" class=""></path><path
                    d="M348.337 150.571H163.663c-38 0-71.94 23.773-84.927 59.485L60.204 261.02h391.592l-18.532-50.964c-12.987-35.712-46.927-59.485-84.927-59.485zM301.184 321.265l-10.041-20.081h-70.286l-10.041 20.081H110.408L70.245 261.02h371.51l-40.163 60.245zM200.775 366.449h110.449M200.775 406.612h110.449M100.449 502H70.163c-11.046 0-20-8.954-20-20v-30.204h70.286V482c0 11.046-8.954 20-20 20zM441.837 502h-30.286c-11.046 0-20-8.954-20-20v-30.204h70.286V482c0 11.046-8.955 20-20 20z"
                    style="stroke-width:20;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
                    fill="none" stroke="#4e4c97" stroke-width="20" stroke-linecap="round"
                    stroke-linejoin="round" stroke-miterlimit="10" data-original="#000000" class=""></path><path
                    d="M433.542 210.816H502v17.822c0 17.883-14.499 32.382-32.382 32.382h-37.905M80.286 261.02H42.382C24.499 261.02 10 246.521 10 228.639v-17.822h68.458M391.755 411.633h-20.286v-.204c0-27.614 22.386-50 50-50h20.286v.204c0 27.614-22.386 50-50 50zM120.449 411.633h20.082c0-27.727-22.477-50.204-50.204-50.204H70.245h0c0 27.727 22.477 50.204 50.204 50.204z"
                    style="stroke-width:20;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
                    fill="none" stroke="#4e4c97" stroke-width="20" stroke-linecap="round"
                    stroke-linejoin="round" stroke-miterlimit="10" data-original="#000000" class=""></path></g>
            </svg>
            {{ car.charge_type }}
        </div>

    </div>

    <div class="car-desc title-side-line">{% trans "Prices" %}</div>

    <div class="day-prices">
        <div class="item-day-price">
            <p class="price-title">1-4 {% trans 'days' %}</p>
            <p class="price-old-rent" style="color: white">.</p>
            <span class="price-rent">{{ car.rent_price }} BYN</span>
            <span class="color-text"> / {% trans 'day' %}</span>
        </div>
        <div class="item-day-price">
            <p class="price-title">5-9 {% trans 'days' %}</p>
            <p class="price-old-rent">{{ car.rent_price }} BYN</p>
            <span id="price59" class="price-rent"></span>
            <span class="color-text"> / {% trans 'day' %}</span>
        </div>
        <div class="item-day-price">
            <p class="price-title">10-19 {% trans 'days' %}</p>
            <p class="price-old-rent">{{ car.rent_price }} BYN</p>
            <span id="price12" class="price-rent"></span>
            <span class="color-text"> / {% trans 'day' %}</span>
        </div>
        <div class="item-day-price">
            <p class="price-title">20-30 {% trans 'days' %}</p>
            <div class="price-old-rent">{{ car.rent_price }} BYN</div>
            <span id="price23" class="price-rent"></span>
            <span class="color-text"> / {% trans 'day' %}</span>
        </div>
    </div>

    <div class="car-desc title-side-line">{% trans "Rental Conditions" %}</div>
    <div class="item-wrapper-terms">
        <div class="wrapper-left">
            <div class="left-side-terms">
                <p class="rent-cond-title">{% trans 'Tenant Requirements' %}</p>
                <p class="rent-cond-co">- {% trans 'Age from 21 years' %}</p>
                <p class="rent-description">{% trans 'Minimum 20 years old' %}*</p>
                <p class="rent-cond-co">- {% trans 'Driving experience from 3 years' %}</p>
                <p class="rent-description">{% trans 'Minimum 2 years' %}*</p>
                <p class="rent-description-last">
                    * {% trans 'A driver who is between 20 and 21 years of age is classified as a "Young Driver"' %}</p>
            </div>

            <div class="left-side-terms" style="height: 140px">
                <p class="rent-cond-title">{% trans 'Border crossing' %}</p>
                <p class="rent-cond-co">{% trans 'Renting abroad is possible, the option is paid' %}. </p>
            </div>
        </div>
        <div class="wrapper-right">
            <div class="right-side-terms" style="height: 220px">
                <p class="rent-cond-title">{% trans 'Mileage' %}</p>
                <p class="rent-cond-co">- {% trans 'No mileage limit' %}</p>
                <p class="rent-cond-co">- {% trans '350 km/day included FREE OF CHARGE' %}</p>
                <p class="rent-cond-co">- {% trans 'Additional km: 1 km / 0.25 BYN' %}</p>
                <p class="rent-description-last">{% trans 'The included mileage is summed up for the entire rental period, you can drive more on one day and less on the other' %}</p>
            </div>

            <div class="right-side-terms">
                <p class="rent-cond-title">{% trans 'Fuel terms' %}</p>
                <p class="rent-cond-co">- {% trans 'Return with the same amount of fuel' %}</p>
                <p class="rent-cond-co">
                    - {% trans 'Upon receipt of the car, the fuel tank will be completely or partially filled' %}</p>
            </div>
        </div>
    </div>

    <div class="ready-to-rent">{% trans 'Ready to rent' %}?</div>
    <div class="rent-btn">
        <a href="{% url 'rental_request' car_id=car.id %}" class="btn {% if not user.is_authenticated %} disabled {% endif %}">{% trans 'Rent' %}</a>
    </div>


{% endblock %}

{% block script %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous">
    </script>
    <script>
        const priceInput = document.getElementById('price');
        const price = parseFloat(priceInput.value.replace(',', '.'));

        const value = price;
        let result59 = value * 0.9;
        let result12 = value * 0.75;
        let result23 = value * 0.5;

        document.getElementById("price59").innerHTML = result59.toFixed(2) + ' BYN';
        document.getElementById("price12").innerHTML = result12.toFixed(2) + ' BYN';
        document.getElementById("price23").innerHTML = result23.toFixed(2) + ' BYN';
    </script>
{% endblock %}
