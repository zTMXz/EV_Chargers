{% extends 'base.html' %}
{% load static i18n %}
{% load widget_tweaks %}

{% block title %} {% trans 'Profile' %} {% endblock %}

{% block style_css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" type='text/css' href="{% static 'css/profile_page.css' %}">
{% endblock %}
{##}
{#{% block cnt %}#}
{#    <div class="container-fluid">#}
{##}
{#        <div class="offset-md-4 col-md-4 offset-sm-3 col-sm-6">#}
{#            <div class="form-container">#}
{#                <h3 class="title">{% trans "Edit Profile" %}</h3>#}
{##}
{#                <form class="form-horizontal" action="{% url 'profile' %}" method="post">#}
{#                    {% csrf_token %}#}
{#                    <div class="form-group">#}
{#                        <input class="form-control" type="text" name="first_name" id="id_first_name" placeholder="{% trans "First Name" %}" value={{ user.first_name }}>#}
{#                    </div>#}
{##}
{#                    <div class="form-group">#}
{#                        <input class="form-control" type="text" name="last_name" id="id_last_name" placeholder="{% trans "Last Name" %}" value={{ user.last_name }}>#}
{#                    </div>#}
{##}
{#                    <span class="description" style="margin-bottom: 35px; margin-top: 10px">#}
{#                     <a class="desc" href="{% url 'password_reset' %}">{% trans "Forgot password" %}?</a>#}
{#                    </span>#}
{##}
{##}
{#                  ВРЕМЕННО!!!!!!!!!!!!!!!!!!!!!!!!#}
{#                    <span class="description">{{ form.errors }}</span>#}
{##}
{#                    <button type="submit" class="btn signup">{% trans "Submit" %}</button>#}
{#                </form>#}
{#            </div>#}
{#        </div>#}
{##}
{#    </div>#}
{#{% endblock %}#}

{% block cnt %}
    <div class="container" style="margin-top: 80px; min-height: 600px; padding: 0 30px">

        {#        <div class="container-fluid">#}
        {#            <div class="profile">#}
        {#                <h2>Profile</h2>#}
        {#                {% if user.is_authenticated %}#}
        {#                    <form action="{% url 'profile' %}" method="post">{% csrf_token %}#}
        {#                        <div class="row" style="margin-top: 10px">#}
        {#                            <div class="col-sm-4">#}
        {#                                <label for="Email">Email</label>#}
        {#                            </div>#}
        {#                            <div class="col-sm-9" id="Email">#}
        {#                                <input class="form-control" type="text" id="Email" name="email" readonly#}
        {#                                       style="width: 250px; text-align: left; cursor: pointer;"#}
        {#                                       value={{ user.email }}>#}
        {#                            </div>#}
        {#                        </div>#}
        {##}
        {#                        <div class="row" style="margin-top: 10px">#}
        {#                            <div class="col-sm-4">#}
        {#                                <label for="id_first_name">First Name</label>#}
        {#                            </div>#}
        {#                            <div class="col-sm-9" id="FirstName">#}
        {#                                <input style="width: 250px" class="form-control" type="text" name="first_name"#}
        {#                                       id="id_first_name" placeholder="{% trans "First Name" %}"#}
        {#                                       value={{ user.first_name }}>#}
        {#                            </div>#}
        {#                        </div>#}
        {##}
        {#                        <div class="row" style="margin-top: 10px">#}
        {#                            <div class="col-sm-4">#}
        {#                                <label for="id_last_name">Last Name</label>#}
        {#                            </div>#}
        {#                            <div class="col-sm-9" id="LastName">#}
        {#                                <input style="width: 250px" class="form-control" type="text" name="last_name"#}
        {#                                       id="id_last_name" placeholder="{% trans "Last Name" %}"#}
        {#                                       value={{ user.last_name }}>#}
        {#                            </div>#}
        {#                        </div>#}
        {##}
        {#                        <div class="row" style="margin-top: 10px">#}
        {#                            <div class="col-sm-3">#}
        {#                                <label for=""></label>#}
        {#                            </div>#}
        {#                            <div class="col-sm-9">#}
        {#                                <button type="submit" class="btn btn-info btn-outline-secondary"#}
        {#                                        style="background: #4E4C97; color: white">{% trans "Submit" %}</button>#}
        {#                            </div>#}
        {#                        </div>#}
        {##}
        {#                    </form>#}
        {#                {% endif %}#}
        {#            </div>#}
        {#        </div>#}

        <div class="container-fluid">
            <h1 style="text-align: center; margin-bottom: 20px">{% trans 'Profile' %}</h1>
            <div class="inputs">
                {% if user.is_authenticated %}
                    <form action="{% url 'profile' %}" method="post">{% csrf_token %}
                        <div class="row" style="margin-top: 10px">
                            <div class="col-sm-4">
                                <label for="Email">Email</label>
                            </div>
                            <div class="col-sm-9" id="Email">
                                <input class="form-control" type="text" id="Email" name="email" readonly
                                       style="width: 300px; text-align: left; cursor: pointer;"
                                       value={{ user.email }}>
                            </div>
                        </div>

                        <div class="row" style="margin-top: 10px">
                            <div class="col-sm-4">
                                <label for="id_first_name">{% trans 'First Name' %}</label>
                            </div>
                            <div class="col-sm-9" id="FirstName">
                                <input style="width: 300px" class="form-control" type="text" name="first_name"
                                       id="id_first_name" placeholder="{% trans "First Name" %}"
                                       value={{ user.first_name }}>
                            </div>
                        </div>

                        <div class="row" style="margin-top: 10px">
                            <div class="col-sm-4">
                                <label for="id_last_name">{% trans 'Last Name' %}</label>
                            </div>
                            <div class="col-sm-9" id="LastName">
                                <input style="width: 300px" class="form-control" type="text" name="last_name"
                                       id="id_last_name" placeholder="{% trans "Last Name" %}"
                                       value={{ user.last_name }}>
                            </div>
                        </div>
                        <div>
                            <button type="submit" class="btn btn-info btn-outline-secondary"
                                    style="background: #4E4C97; color: white; margin-left: 178px; margin-top: 20px">{% trans "Submit" %}</button>
                        </div>

                    </form>
                {% endif %}
            </div>
            <div class="images">

                <img src="{{ user.driver_license.url }}"
                     alt="{{ user.first_name }}-{{ user.first_name }}-driver-license"
                     title="{% trans 'driver license' %}">
                <img src="{{ user.driver_license_with_owner.url }}"
                     alt="{{ user.first_name }}-{{ user.first_name }}-driver-license-with-you"
                     title="{% trans 'driver license with you' %}">
            </div>
        </div>


        <div class="rental-history">
            <h1 style="margin: 20px 0; text-align: center;">{% trans 'Rental History' %}</h1>

            <table class="table" id="table">
                <thead>
                <tr>
                    <th class="col-md-4">Car</th>
                    <th class="col-md-2">Start Date</th>
                    <th class="col-md-2">End Date</th>
                </tr>
                </thead>

                <tbody>
                {% if rental_hst %}

                    {% for rent in rental_hst %}
                        <tr>
                            <td class="col-md-4">
                                <a href="{{ rent.car.get_absolute_url }}"
                                   style="text-decoration: none; color: #076f96">{{ rent.car }}
                                </a>
                            </td>
                            <td class="col-md-2">
                                {{ rent.start_date }}
                            </td>
                            <td class="col-md-2">
                                {{ rent.end_date }}
                            </td>
                        </tr>
                    {% endfor %}

                {% else %}
                    <tr>
                        <td class="col-md-12 text-center" colspan="4">
                            NO items to display
                        </td>
                    </tr>
                {% endif %}
                </tbody>
            </table>

            <nav class="page-navigation" aria-label="Page navigation">
                <ul class="pagination">
                    <li class="page-item">
                        {% if rental_hst.has_previous %}
                            <a class="page-link" href="?page={{ rental_hst.previous_page_number }}"
                               aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        {% else %}
                            <div class="page-link disabled"><span>&laquo;</span></div>
                        {% endif %}
                    </li>
                    {% for i in rental_hst.paginator.page_range %}
                        {% if rental_hst.number == i %}
                            <li class="active page-item"><span class="page-link">{{ i }}</span></li>
                        {% else %}
                            <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                        {% endif %}
                    {% endfor %}
                    <li class="page-item">
                        {% if rental_hst.has_next %}
                            <a class="page-link" href="?page={{ rental_hst.next_page_number }}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        {% else %}
                            <div class="page-link disabled"><span>&raquo;</span></div>
                        {% endif %}
                    </li>
                </ul>
            </nav>
        </div>


    </div>
{% endblock %}

{% block script %}


{% endblock %}